<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tela 1</title>
</head>
<body>
    
    <style>

        .form{
            position: relative;
            text-align: center;
            width: 50%;
            height: 50%;
            margin: 5% 25% 1% 25%;
            border: 5px black solid;
            padding: 10px 10px 10px 10px;
        }
        .erro{
            color: red;
        }

    </style>

    <div class="form">
        Insira o CPF do cliente no formato 12345678909 <br><br><input type="number" name="cpf" id="cpf"><br><br><br><br>
        UF <select name="uf" id="uf">
            <option value="to">TO</option>
        </select>
        N° no formato (DD)DDDDD-DDDD <input type="tel" name="tel" id="tel"><br><br><br><br>
        <input type="submit" value="ENVIAR" onclick="validar ()"><br><br>
        <div class="erro" id="erro"></div>
    </div>

    <script>

        let strCPF;
        //12345678909
        let phone;
        /*
        (16) 91231-6165
        (16) 3231-6165
        16 91231-6165
        16 3231-616
        3231-6165
        91231-6165
        (63)99205-6862
        */

        function validar(){
            strCPF = document.getElementById('cpf').value; 
            phone = document.getElementById('tel').value;
            let trueCPF = TestaCPF(strCPF);
            let truePhone = validPhone(phone);

            console.log(trueCPF +" "+ truePhone)
            if (trueCPF == true && truePhone == true){
                window.location.href = "cadastro.html";
            }else if(trueCPF == false && truePhone == true){
                erro.innerHTML = "cpf invalido";
            }else if(truePhone == false && trueCPF == true){
                erro.innerHTML = "número invalido";
            }else if(truePhone == false && trueCPF == false){
                erro.innerHTML = "número e cpf invalidos";
            }
        }

        function TestaCPF(strCPF){
            let Soma;
            let Resto;
            Soma = 0;

                if (strCPF == "00000000000") return false;
            
            for (i=1; i<=9; i++) Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (11 - i);
            Resto = (Soma * 10) % 11;
            
                if ((Resto == 10) || (Resto == 11))  Resto = 0;
                if (Resto != parseInt(strCPF.substring(9, 10)) ) return false;
            
            Soma = 0;
                for (i = 1; i <= 10; i++) Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (12 - i);
                Resto = (Soma * 10) % 11;
            
                if ((Resto == 10) || (Resto == 11))  Resto = 0;
                if (Resto != parseInt(strCPF.substring(10, 11) ) ) return false;
                return true;
            }

            function validPhone (phone) {
                var regex = new RegExp(/(\(?\d{2}\)?\s)?(\d{4,5}\-\d{4})/g);
                return regex.test(phone);
        }

    </script>
    
</body>
</html>